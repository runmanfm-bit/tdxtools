# 通达信选股工具配置文件

# 数据源配置
data_sources:
  default: "akshare"  # 默认数据源: tushare, akshare, baostock
  
  tushare:
    token: ""  # 从环境变量 TUSHARE_TOKEN 读取
    timeout: 30
    
  akshare:
    timeout: 30
    
  baostock:
    user_id: ""
    password: ""

# 回测配置
backtest:
  initial_capital: 100000.0  # 初始资金
  commission_rate: 0.0003    # 佣金率 (0.03%)
  slippage: 0.001            # 滑点 (0.1%)
  risk_free_rate: 0.03       # 无风险利率 (3%)
  
  # 交易规则
  trading:
    min_trade_quantity: 100  # 最小交易数量 (1手)
    max_position_ratio: 0.8  # 最大持仓比例
    stop_loss: 0.10          # 止损比例
    take_profit: 0.20        # 止盈比例

# 策略配置
strategies:
  # 移动平均线策略
  ma_crossover:
    short_window: 5
    long_window: 20
    
  # RSI策略
  rsi:
    period: 14
    oversold: 30
    overbought: 70
    
  # MACD策略
  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9

# 数据存储
storage:
  data_dir: "./data"  # 数据存储目录
  cache_enabled: true
  cache_ttl: 86400    # 缓存有效期(秒)
  
  # 数据库配置 (可选)
  database:
    enabled: false
    type: "sqlite"    # sqlite, mysql, postgresql
    path: "./data/tdxtools.db"

# 日志配置
logging:
  level: "INFO"       # DEBUG, INFO, WARNING, ERROR
  file: "./logs/tdxtools.log"
  max_size: 10485760  # 10MB
  backup_count: 5

# 可视化配置
visualization:
  theme: "dark"       # dark, light
  figure_size: [12, 6]
  dpi: 100
  
  # 图表颜色
  colors:
    portfolio: "#1f77b4"
    benchmark: "#ff7f0e"
    buy_signal: "#2ca02c"
    sell_signal: "#d62728"
    drawdown: "#9467bd"

# 通达信公式配置
tdx_formulas:
  # 支持的函数列表
  supported_functions:
    - "MA"     # 移动平均
    - "EMA"    # 指数移动平均
    - "MACD"   # MACD指标
    - "KDJ"    # KDJ指标
    - "RSI"    # RSI指标
    - "BOLL"   # 布林带
    - "REF"    # 引用若干周期前的数据
    - "HHV"    # 最高值
    - "LLV"    # 最低值
    - "SUM"    # 求和
    - "COUNT"  # 统计满足条件的周期数
    
  # 公式示例
  examples:
    ma_crossover: "C > MA(C, 5) AND C > MA(C, 20)"
    volume_spike: "VOL > MA(VOL, 20) * 1.5"
    rsi_oversold: "RSI(C, 14) < 30"

# 性能优化
performance:
  use_multiprocessing: true
  max_workers: 4
  chunk_size: 1000